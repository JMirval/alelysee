[package]
name = "api"
version = "0.1.0"
edition = "2021"

[dependencies]
dioxus = { workspace = true, features = ["fullstack"] }
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.143"
# IMPORTANT: disable uuid default features so the web (wasm) build doesn't pull in `v4` (needs RNG).
uuid = { version = "1.18.1", default-features = false, features = [
    "serde",
    "std",
] }
time = { version = "0.3.41", features = ["serde", "macros"] }
sqlx = { version = "0.8.3", optional = true, default-features = false, features = [
    "postgres",
    "runtime-tokio-rustls",
    "macros",
    "migrate",
    "uuid",
    "time",
] }
tokio = { version = "1.47.1", optional = true, features = [
    "rt-multi-thread",
    "macros",
] }
anyhow = { version = "1.0.100", optional = true }
jsonwebtoken = { version = "9.3.1", optional = true }
reqwest = { version = "0.12.23", optional = true, default-features = false, features = [
    "json",
    "rustls-tls",
] }
aws-config = { version = "1.8.6", optional = true }
aws-credential-types = { version = "1.2.6", optional = true }
aws-sdk-s3 = { version = "1.94.0", optional = true }
chrono = { version = "0.4.42", features = ["serde"] }
argon2 = "0.5"
lettre = { version = "0.11", default-features = false, features = ["smtp-transport", "builder", "tokio1-rustls-tls"] }
sha2 = "0.10"
rand = "0.8"
hex = "0.4"

[features]
server = [
    "dioxus/server",
    "dep:sqlx",
    "dep:tokio",
    "dep:anyhow",
    "dep:jsonwebtoken",
    "dep:reqwest",
    "dep:aws-config",
    "dep:aws-credential-types",
    "dep:aws-sdk-s3",
    "uuid/v4",
    "uuid/rng-getrandom",
]

[dev-dependencies]
tokio = { version = "1.47.1", features = ["rt-multi-thread", "macros"] }
